// Generated by CoffeeScript 1.7.1
var add_to_list, check_if_no_records, remove_record_from_page, set_viewed_icon, set_viewed_icon_and_remove_buttons;

remove_record_from_page = function(id) {
  return $('#record' + id).fadeOut('fast', function() {
    $(this).remove();
    return check_if_no_records();
  });
};

add_to_list = function(movie_id, list_id, record_id) {
  return $.post(url_ajax_add_to_list, {
    movie_id: movie_id,
    list_id: list_id
  }, function(data) {
    return set_viewed_icon_and_remove_buttons(record_id, list_id);
  }).error(function() {
    return display_message('Ошибка добавления фильма в список');
  });
};

check_if_no_records = function() {
  if (!$('.movie').length) {
    return $('#results').html('Список пуст.');
  }
};

set_viewed_icon_and_remove_buttons = function(record_id, list_id) {
  var remove_buttons;
  remove_buttons = function() {
    return $('#record' + record_id).children('.title').children('.add-to-list-buttons').html('');
  };
  set_viewed_icon(record_id, list_id);
  if (list_id !== 0) {
    return remove_buttons();
  }
};

set_viewed_icon = function(record_id, list_id) {
  var html, icon, title;
  if (list_id === 0) {
    return;
  } else if (list_id === 1) {
    icon = '';
    title = 'Просмотрено';
  } else if (list_id === 2) {
    icon = '-slash';
    title = 'К просмотру';
  }
  html = " <i class=\"fa fa-eye" + icon + "\" title=\"" + title + "\"></i> ";
  return $('#record' + record_id).children('.title').prepend(html);
};
