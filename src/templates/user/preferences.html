{% extends 'base.html' %}

{% load i18n %}
{% load avatar %}
{% load static %}

{% block content %}
<div ng-controller="PreferencesController">
<form class="form-horizontal" id="preferences">
  <legend>{% trans 'Settings' %}</legend>
  <br>
  <div class="form-group row vk-app-hide" style="display: none;">
    <label class="col-form-label col-sm-2" for="lang">{% trans 'Avatar' %}:</label>
    <div class="col-sm-10">
      {% avatar_big user %}
      {% if not user.is_linked %}
        <br>
        {% trans 'You can change your avatar on' %} <a href="http://gravatar.com" target="_blank">Gravatar</a>
      {% endif %}
    </div>
  </div>

  <div class="form-group row">
    <label class="col-form-label col-sm-2" for="lang">{% trans 'Language' %}:</label>
    <div class="col-sm-10">
    {% get_available_languages as LANGUAGES %}
    {% get_language_info_list for LANGUAGES as languages %}
    {% for language in languages %}
    <label class="radio">
      <input type="radio" ng-click="savePreferences(true)" name="lang" value="{{ language.code }}" {% ifequal user.language language.code %} checked {% endifequal %}> {{ language.name_local }}
    </label>
    {% endfor %}
    </div>
  </div>

  <div class="form-group row">
    <label class="col-form-label col-sm-2" for="only-for-friends">{% trans 'Access' %}:</label>
    <div class="col-sm-10">
      <label class="checkbox">
        <input type="checkbox" ng-click="savePreferences()" id="only-for-friends" name="only_for_friends" {% if user.only_for_friends %} checked {% endif %}> {% trans 'Show my lists only to friends' %}<br>
      </label>
    </div>
  </div>
</form>
</div>
{% endblock %}

{% block js %}
<script>
  const urlSavePreferences = '{% url 'save_preferences' %}';
</script>
<script src="{% static 'js/preferences.js' %}"></script>
{% endblock %}
